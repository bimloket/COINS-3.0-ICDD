# Use Case: Exchanging ICDD container between parties 

The use of ICDD containers will be further explained using an example use case, which builds upon Annex A of the ICDD standard. In this use case, data will only be exchanged between a client and a contractor (i.e., no data sharing in a common data environment as mentioned in ISO 19650), making use of the ICDD standard. The two parties exchange information about the periodic maintenance inspection of a bridge.

> Other scenarios are also possible with ICDD. For a data sharing case, see https://research.aalto.fi/en/publications/implementing-information-container-for-linked-document-delivery-i. Similarly, other scenarios than client-contractor are possible (e.g., two parties working on the same project).

The scope of this use case includes: 
- Structured data: structured open file formats such as RDF, CSV or JSON, which can be interpreted by computers. 
- Geographical/Geometrical data: files generated by GIS or CAD tooling. 
- Documentation: all other data stored in purely human-readable file formats, such as PDF, Word or images. 

> **Background: VISI**
>
> The ICDD container is used as an information delivery between parties. It contains specific information that is requested by one party (the “initiator”) and delivered by another party (the “executor”). The ISO standard that addresses the planning and monitoring of such information exchanges between initiator and executor is ISO 29481 ‘Building information Models – Information Delivery Manual’, part 2: Interaction framework. The Dutch implementation of this standard is VISI. With VISI, the transactional state of an ICDD container can be tracked: a container can be an appendix to a request, a promise, a state or an accept message as described in the DEMO theory that is the foundation of VISI.
> ![Basic DEMO transaction pattern that can be applied to all communications, including information deliveries](./media/icdd/demo_transaction.png)
> In this implementation guide the focus lies on producing and reading valid ICDD containers. Tracking the process of information exchange and the state of the ICDD containers is out of scope.


## The goal of exchanging ICDD containers 

In this use case, ICDD containers are used to formalise data exchange between the two parties. This helps them to interpret each other's data more easily, while retaining the freedom to independently arrange their own IT infrastructure. On a more concrete level, there are two key goals: 
- The client can formally define which documents are to be sent by the contractor. This ensures that both client and contractor are aware of the minimum requirements for the data exchange. 
- The coherence between the data, even across multiple files, is retained when exchanging data. 

## Setting up an ICDD container 

The first step when creating an ICDD container is to take stock of all files that need to be included. As the required files are not uncommonly scattered throughout different applications, it is recommended to have one central application that keeps track of the files and their locations. This role could be fulfilled by an application for Model Based Systems Engineering or a Document Management System. 

For each file that needs to end up in the container, the file name and file type (extension) should be known. If managed in a centralized manner, the internal application/location where the file can be found should also be stored to help with building up the container. 

To generate the container, the following steps need to be taken. The higher an organisation’s grip over its documents, the more steps could be automated 

**1. Check previous container versions**

If there is a previous version of the container, it needs to be known in advance. This allows for proper handling of versioning when creating the new container, as well as a check on the presence of all requested documents. 

**2. Select which files will be included**

In this step, a user should be able to select the required files. For each file, metadata needs to be available from the source system: file name/type, a name and description, its creator and creation date. If a file has been used in a previous version of the container, the version number needs to be increased. If not, version number ‘1’ should be added as metadata. If the file has not changed between two versions of the container, the version number does not need to be increased. 

At the end of this step, there should be a check if all requested documents have been added. If there are no previous versions of the container, this final check can be skipped. 

**3. Add file requests**

If files are to be requested from the other party, these should now be added. For each of these requested files, the same metadata from the previous step should be added. The version number field should indicate the expected version number of the file that will be returned by the other party. The difference compared to step 2 is that the document will not be placed in the container and that an extra metadata field ‘requested’ should be set to the value ‘true’. 

**4. If a folder structure is used, determine which files will end up in which folder**

The ‘Payload documents’ folder is allowed to contain a folder structure. If used, this structure needs to be added during this step. 

**5. Generate link sets**

The process of generating link sets can be found here Process of creating links: 

**6. Generate Index file**

Based on the files and link sets, their metadata and their location within the folder structure, the Index file can be generated. 

**7. Create the ZIP archive with all files**

All files should be added to a folder structure, including the three standard ICDD container folders. Optionally, the ICDD ontologies can be added as well. The entire set of folders and files should now be added to a ZIP archive with the ‘.icdd’ extension. 

## Importing an ICDD container 

First of all, the container needs to be decompressed. In order to interpret its content, the Index file should be read. This file will provide the full list of documents, the document type for each of these (file extensions) and a reference to link sets, if any have been added. 

It is possible to automate sending the documents to the appropriate applications, for example based on:
- the folder structure + naming conventions, if agreed upon in an Exchange Information Requirements document (ILS in Dutch); 
- the file extensions (e.g., send IFC files to CAD software). 

The importing tool should be able to make a distinction between sent documents and requested documents. The sent documents need to be imported in the appropriate applications, while requested documents only need to be visualized for end users. This allows them to create the requested documents. In more advanced scenarios, the tool could already create empty placeholder documents or incorporate a search mechanism for already existing content. 

In theory, the import functionality could be handled by the same, central application which is used to track all files within your organisation. However, as this software will not contain this functionality out-of-the-box, it is advised to leave this functionality to a separate tool. Interpreting data from a container is a separate piece of functionality which could be integrated with the IT landscape of an organisation. 

## Looking for changes 

When multiple containers are exchanged over the course of a project, it would be of value if the importing tool could discern versions of containers, link sets and files. Only new files or new versions should be imported to avoid duplicates. This option can be considered as a more advanced feature when implementing ICDD tooling.